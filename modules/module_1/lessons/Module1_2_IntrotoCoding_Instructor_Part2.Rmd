---
title: 'Module 1: Intro to Coding in R'
author: "Ellen Bledsoe"
date: "`r Sys.Date()`"
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 2-Dimensional Data: Data Frames

Most of the data you will encounter is two-dimensional, i.e., it has
columns and rows. Its structure resembles a spreadsheet. R is really
good with these types of data.

-   **rows** go side-to-side
-   **columns** go up-and-down

Data frames are made up of multiple vectors. Each vector becomes a
column.

```{r}
# Create a simple data frame
plants <- data.frame(height = c(55, 17, 42, 47, 68, 39),
                     nitrogen = c("Y", "N", "N", "Y", "Y", "N"))

plants
```

### Sub-setting Data Frames

Because data frames are two-dimensional, we can subset data in different
ways. We can select specific columns, specific rows, or filter rows by
values.

R always takes information for the row first, then the column.

```{r}
# Sub-setting data frames
# 2-dimensional, so you need to specify row and then column
# plants[3] # doesn't work
plants[4,1]
plants[,2]

# We can also choose specific columns using `$`
plants$height

```

### Discussion Point

This is a simple data set, but let's come up with some questions.

Example: height of plants treated with nitrogen vs. those not treated.

```{r}
# Example: height of plants treated with nitrogen vs. those not treated. 

# filter rows based on values in the nitrogen column
plants[plants$nitrogen == "Y", ]
mean(plants[plants$nitrogen == "Y", 1])
```

### Group Challenge (5 min)

Using help files on functions

As a group, find the standard deviation `sd()` of the height of plants
treated with nitrogen and those not treated with nitrogen. Which group
has the larger standard deviation?

```{r}
sd(plants[plants$nitrogen == "Y", 1])
sd(plants[plants$nitrogen == "N", 1])
```

Come up with a definition of standard deviation (Google is your
friend!), use the help file to find out how the `sd()` function works,
and be prepared to show the code you used.

## Helpful Functions

Below are some functions that I often find very helpful when working
with vectors and data frames:

-   `str()`
-   `head()` and `tail()`
-   `length()`
-   `ncol()` and `nrow()`
-   `names()`

```{r}
str(plants) # structure of the object

head(plants) # first 6 values or rows
head(plants, n = 4) # first n values or rows
tail(plants, n = 4) # last n values or rows

length(plants)  # for a dataframe, number of columns
length(plants$height) # for a column, number of rows

ncol(plants)  # number of columns
nrow(plants)  # number of rows

names(plants) # list of column or object names
```

# Rmarkdown and Code Chunks (10 minutes)

Rmarkdown (.Rmd) is a file format that lets us incorporate text and code
into one document seamlessly. In fact, it is the file format for this
document!

-   For writing text, you can type as you would normally
-   Code chunks are a bit different.
    -   Type your R code in the lines under the `{r}`.

    -   To include text in them, you will need to put a `#` in front. R
        will not read anything after the `#` as code. Chunks look like
        this:

```{r}

```

A quick shortcut for adding a code chunk is `Ctrl + Atl + i`
(`Cmd + Opt + i` on a Mac). Alternatively, you can go to Code \> Insert
Chunk.

To run a chunk of code, click the green arrow on the far right side of
the chunk. You can also run one or a few lines of code at a time by
having your cursor on the line or highlighting multiple lines and
hitting `Ctrl` + `Enter` (or `Cmd` + `Enter` on a Mac).

Let's work with an example code chunk. Practice entering a new code
chunk below.

```{r}
# My first code chunk!
# Ellen Bledsoe
# Aug 2022

# Examining a pre-built data set in R
Orange

# printing maximum circumference of the biggest tree
max(Orange$circumference)

```

If you run code in the console (below) rather than the code chunk in a
.Rmd file, you don't need to add the `{r}` to tell it that you are
typing R code. The console only understand R code, so we don't need to
tell it!

### Group challenge

Construct a new Rmarkdown script (with all of the appropriate formatting
we discussed) that calculates the average (mean) circumference of trees
in the orange data set. Save the mean as an object called "avg_circ."

Save the script and be ready to share it.

If you're already finished, try this challenge. Find the average
circumference of trees aged 484 days.

```{r}
head(Orange)
avg_circ <- mean(Orange$circumference, na.rm = TRUE)
avg_circ

trees484 <- Orange[Orange$age == 484, 3]
mean(trees484)
```
